# MCP 匯率與店鋪查詢系統 - AI 串接使用範例

## 系統功能概述

這個 MCP 服務器提供以下功能：
1. 匯率查詢（特定日期、最近幾天）
2. 店鋪信息查詢（人數、幣別）
3. 綜合查詢（店鋪信息 + 對應匯率）

## 可用的工具 (Tools)

### 1. 匯率查詢工具
- `get_exchange_rate(currency, date)` - 查詢特定日期匯率
- `get_latest_exchange_rates(currency, days)` - 查詢最近幾天匯率

### 2. 店鋪查詢工具
- `get_store_info(store_id)` - 查詢特定店鋪信息
- `get_all_stores_info()` - 查詢所有店鋪信息

### 3. 綜合查詢工具
- `get_store_with_exchange_rate(store_id, days)` - 同時查詢店鋪信息和匯率

## AI 串接時的詢問範例

### 基本店鋪查詢
```
用戶：「請查詢 STORE1 的人數和使用的幣別」
AI 回應：會使用 get_store_info("STORE1") 工具
結果：顯示員工數、管理人員數、總人數、使用幣別

用戶：「告訴我所有店鋪的資訊」
AI 回應：會使用 get_all_stores_info() 工具
結果：列出所有店鋪的完整信息
```

### 匯率查詢
```
用戶：「今天美元對台幣的匯率是多少？」
AI 回應：會使用 get_exchange_rate("USD", "2025-08-15") 工具

用戶：「最近一週日幣的匯率走勢如何？」
AI 回應：會使用 get_latest_exchange_rates("JPY", 7) 工具

用戶：「查詢 2025-08-10 的歐元匯率」
AI 回應：會使用 get_exchange_rate("EUR", "2025-08-10") 工具
```

### 綜合查詢（店鋪 + 匯率）
```
用戶：「STORE2 使用什麼幣別？今天的匯率是多少？」
AI 回應：會使用 get_store_with_exchange_rate("STORE2", 1) 工具
結果：同時顯示店鋪信息和對應幣別的最新匯率

用戶：「幫我查詢 STORE1 的人員配置，還有他們使用幣別的最近3天匯率」
AI 回應：會使用 get_store_with_exchange_rate("STORE1", 3) 工具
```

### 複雜查詢範例
```
用戶：「我想知道哪個店鋪人數最多，還有他們用的貨幣今天匯率多少？」
AI 回應：會先使用 get_all_stores_info() 比較人數，然後針對人數最多的店鋪使用 get_store_with_exchange_rate()

用戶：「比較所有店鋪使用的貨幣，哪個匯率比較好？」
AI 回應：會使用多個工具組合查詢各店鋪使用的貨幣匯率

用戶：「STORE2 如果要轉換成台幣，100萬日幣現在值多少錢？」
AI 回應：會先查詢日幣匯率，然後進行計算
```

## 支援的貨幣代碼

### 中文名稱對應表
- 台幣 → 本地貨幣（無需匯率）
- 日幣 → JPY
- 美金/美元 → USD  
- 歐元 → EUR
- 英鎊 → GBP
- 港幣 → HKD
- 澳幣 → AUD
- 加幣 → CAD
- 新幣 → SGD
- 人民幣 → CNY

## 目前店鋪資料

```
STORE1: 
- 員工人數：18人
- 管理人員：2人
- 總人數：20人
- 使用幣別：台幣

STORE2:
- 員工人數：20人
- 管理人員：0人
- 總人數：20人
- 使用幣別：日幣
```

## 實際對話範例

### 範例 1：基本查詢
```
用戶：「STORE1 有多少人？」
AI：我來查詢 STORE1 的人員信息...
[使用 get_store_info("STORE1")]
結果：STORE1 總共有 20 人，包括 18 名員工和 2 名管理人員，使用台幣作為幣別。
```

### 範例 2：綜合查詢
```
用戶：「STORE2 的詳細信息和今天的匯率」
AI：我來查詢 STORE2 的信息並取得對應的匯率資料...
[使用 get_store_with_exchange_rate("STORE2", 1)]
結果：會顯示 STORE2 的人員配置、使用日幣，以及今天日幣對台幣的匯率詳情。
```

### 範例 3：比較分析
```
用戶：「比較兩個店鋪，哪個人比較多？他們的貨幣匯率差多少？」
AI：我來查詢所有店鋪信息並比較匯率...
[使用 get_all_stores_info() 和相關匯率查詢]
結果：會分析兩個店鋪的人數相同都是20人，但使用不同幣別，並提供匯率比較。
```

## 注意事項

1. **日期格式**：查詢特定日期時請使用 'YYYY-MM-DD' 格式
2. **店鋪 ID**：大小寫不敏感，系統會自動轉換為大寫
3. **貨幣代碼**：支援中文名稱或標準三字母代碼
4. **台幣處理**：台幣為本地貨幣，不提供匯率轉換
5. **錯誤處理**：查詢不存在的店鋪時會提示可用的店鋪列表

## 啟動服務器

```bash
cd mcp_demo
python exchange_rate_mcp_sse.py --host 0.0.0.0 --port 8081
```

服務器將在 `http://localhost:8081` 啟動，提供 SSE (Server-Sent Events) 介面供 AI 系統串接。
